/**
 * Entity Panels - Product, Category, and Agent info panels
 *
 * Sidebar panels that display entity details and allow editing.
 *
 * @package AISales_Sales_Manager
 */

/* ==========================================================================
   Product Panel (Right Sidebar)
   ========================================================================== */

.aisales-product-panel {
	display: flex;
	flex-direction: column;
	background: var(--aisales-bg-white);
	border: 1px solid var(--aisales-border-light);
	border-radius: var(--aisales-radius-lg);
	box-shadow: var(--aisales-shadow-sm);
	overflow: hidden;
	max-height: calc(100vh - 180px);
}

/* ----- Empty State ----- */
.aisales-product-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	padding: var(--aisales-space-10) var(--aisales-space-6);
	flex: 1;
	background:
		radial-gradient(ellipse at center, var(--aisales-bg-subtle) 0%, transparent 70%);
}

.aisales-product-empty .dashicons {
	font-size: 56px;
	width: 56px;
	height: 56px;
	margin-bottom: var(--aisales-space-5);
	color: var(--aisales-border);
	opacity: 0.6;
}

.aisales-product-empty p {
	font-size: var(--aisales-font-md);
	color: var(--aisales-text-muted);
	margin: 0;
}

/* ----- Product Info ----- */
.aisales-product-info {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow-y: auto;
}

/* Product Header with Image */
.aisales-product-info__header {
	padding: var(--aisales-space-5);
	background: linear-gradient(180deg, var(--aisales-bg-subtle) 0%, var(--aisales-bg-white) 100%);
	border-bottom: 1px solid var(--aisales-border-light);
	text-align: center;
}

.aisales-product-info__image {
	margin-bottom: var(--aisales-space-4);
}

.aisales-product-info__image img {
	width: 120px;
	height: 120px;
	object-fit: cover;
	border-radius: var(--aisales-radius-lg);
	border: 1px solid var(--aisales-border-light);
	box-shadow: var(--aisales-shadow-md);
}

.aisales-product-info__image img:empty,
.aisales-product-info__image img[src=""] {
	display: none;
}

.aisales-product-info__name {
	font-size: var(--aisales-font-lg);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
	margin: 0;
	line-height: var(--aisales-line-height-tight);
}

/* Quick Stats Row */
.aisales-product-info__stats {
	display: flex;
	justify-content: space-around;
	padding: var(--aisales-space-4) var(--aisales-space-5);
	background: var(--aisales-bg-subtle);
	border-bottom: 1px solid var(--aisales-border-light);
}

.aisales-product-info__stat {
	text-align: center;
}

.aisales-product-info__stat-value {
	font-size: var(--aisales-font-lg);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
}

.aisales-product-info__stat-label {
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Product Fields */
.aisales-product-info__fields {
	flex: 1;
	padding: var(--aisales-space-2) 0;
	overflow-y: auto;
}

.aisales-product-info__field {
	margin-bottom: 0;
	padding: var(--aisales-space-3) var(--aisales-space-4);
	border-bottom: 1px solid var(--aisales-border-lighter);
	transition: background var(--aisales-transition-fast);
}

.aisales-product-info__field:hover {
	background: var(--aisales-bg-subtle);
}

.aisales-product-info__field:last-of-type {
	border-bottom: none;
}

.aisales-product-info__label {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	font-size: 11px;
	font-weight: var(--aisales-font-weight-semibold);
	color: var(--aisales-text-muted);
	text-transform: uppercase;
	letter-spacing: 0.8px;
	margin-bottom: var(--aisales-space-2);
}

.aisales-product-info__label .dashicons {
	font-size: 14px;
	width: 14px;
	height: 14px;
	color: var(--aisales-primary);
	opacity: 0.7;
}

.aisales-product-info__value {
	font-size: var(--aisales-font-sm);
	color: var(--aisales-text-primary);
	line-height: var(--aisales-line-height-relaxed);
}

.aisales-product-info__value--truncated {
	max-height: 60px;
	overflow: hidden;
	position: relative;
}

.aisales-product-info__value--truncated::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 20px;
	background: linear-gradient(transparent, var(--aisales-bg-white));
}

.aisales-product-info__field--expanded .aisales-product-info__value--truncated {
	max-height: none;
}

.aisales-product-info__field--expanded .aisales-product-info__value--truncated::after {
	display: none;
}

.aisales-expand-toggle {
	background: none;
	border: none;
	padding: var(--aisales-space-1);
	margin-left: auto;
	cursor: pointer;
	color: var(--aisales-text-muted);
	border-radius: var(--aisales-radius-sm);
	transition: all var(--aisales-transition-fast);
}

.aisales-expand-toggle:hover {
	color: var(--aisales-primary);
	background: var(--aisales-primary-light);
}

.aisales-product-info__field--expanded .aisales-expand-toggle .dashicons {
	transform: rotate(180deg);
}

/* No Value State */
.aisales-no-value {
	color: var(--aisales-text-muted);
	font-style: italic;
	font-size: var(--aisales-font-sm);
}

/* Tags Display */
.aisales-product-info__tags {
	display: flex;
	flex-wrap: wrap;
	gap: var(--aisales-space-1);
}

.aisales-tag {
	display: inline-block;
	padding: var(--aisales-space-1) var(--aisales-space-3);
	background: var(--aisales-bg-muted);
	border: 1px solid var(--aisales-border);
	border-radius: var(--aisales-radius-full);
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-secondary);
	transition: all var(--aisales-transition-fast);
}

.aisales-tag:hover {
	border-color: var(--aisales-primary);
	color: var(--aisales-primary);
}

.aisales-tag--added {
	background: var(--aisales-success-light);
	border-color: var(--aisales-success);
	color: var(--aisales-success);
}

.aisales-tag--removed {
	background: var(--aisales-danger-light);
	border-color: var(--aisales-danger);
	color: var(--aisales-danger);
	text-decoration: line-through;
}

/* Stock & Status */
.aisales-stock {
	font-weight: var(--aisales-font-weight-medium);
}

.aisales-stock--instock { color: var(--aisales-success); }
.aisales-stock--outofstock { color: var(--aisales-danger); }
.aisales-stock--backorder { color: var(--aisales-warning); }

.aisales-stock__qty {
	color: var(--aisales-text-muted);
	font-weight: var(--aisales-font-weight-normal);
	margin-left: var(--aisales-space-1);
}

.aisales-status {
	display: inline-flex;
	align-items: center;
	padding: var(--aisales-space-1) var(--aisales-space-3);
	border-radius: var(--aisales-radius-full);
	font-size: var(--aisales-font-xs);
	font-weight: var(--aisales-font-weight-medium);
}

.aisales-status--publish {
	background: var(--aisales-success-light);
	color: var(--aisales-success);
}

.aisales-status--draft {
	background: var(--aisales-warning-light);
	color: var(--aisales-warning-hover);
}

.aisales-status--pending {
	background: var(--aisales-info-light);
	color: var(--aisales-info-hover);
}

.aisales-status--private {
	background: var(--aisales-bg-muted);
	color: var(--aisales-text-secondary);
}

/* Pending Changes */
.aisales-product-info__field--has-pending {
	animation: fieldHighlight 0.5s ease;
}

@keyframes fieldHighlight {
	0%, 100% { background-color: transparent; }
	50% { background-color: var(--aisales-warning-light); }
}

.aisales-product-info__pending {
	margin-top: var(--aisales-space-3);
}

.aisales-pending-change {
	display: flex;
	align-items: flex-start;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-2) var(--aisales-space-3);
	background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
	border: 1px solid var(--aisales-success);
	border-radius: var(--aisales-radius-md);
}

.aisales-pending-change__new {
	flex: 1;
	min-width: 0;
	font-size: var(--aisales-font-sm);
	color: var(--aisales-success-hover);
	font-weight: var(--aisales-font-weight-medium);
	line-height: 1.4;
	word-break: break-word;
}

.aisales-pending-change__actions {
	display: flex;
	flex-shrink: 0;
	gap: var(--aisales-space-1);
}

.aisales-pending-change--tags .aisales-pending-change__added,
.aisales-pending-change--tags .aisales-pending-change__removed {
	display: flex;
	flex-wrap: wrap;
	gap: var(--aisales-space-1);
	margin-bottom: var(--aisales-space-1);
}

/* Pending Summary */
.aisales-pending-summary {
	margin: var(--aisales-space-4);
	padding: var(--aisales-space-4);
	background: linear-gradient(135deg, var(--aisales-warning-light) 0%, #fff8e8 100%);
	border: 1px solid var(--aisales-warning);
	border-radius: var(--aisales-radius-md);
	box-shadow: var(--aisales-shadow-sm);
}

.aisales-pending-summary__header {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	font-weight: var(--aisales-font-weight-semibold);
	color: var(--aisales-warning-hover);
	margin-bottom: var(--aisales-space-3);
}

.aisales-pending-summary__actions {
	display: flex;
	gap: var(--aisales-space-2);
}

/* Product Actions Footer */
.aisales-product-info__actions {
	display: flex;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-4);
	background: var(--aisales-bg-subtle);
	border-top: 1px solid var(--aisales-border-light);
	margin-top: auto;
}

.aisales-product-info__actions .aisales-btn {
	flex: 1;
	justify-content: center;
}

/* ==========================================================================
   Entity Panel (Generic - replaces product-only panel)
   ========================================================================== */

.aisales-entity-panel {
	position: sticky;
	top: 32px; /* WordPress admin bar height */
	display: flex;
	flex-direction: column;
	background: var(--aisales-bg-white);
	border: 1px solid var(--aisales-border-light);
	border-radius: var(--aisales-radius-lg);
	box-shadow: var(--aisales-shadow-sm);
	overflow: hidden;
	max-height: calc(100vh - 80px);
	overflow-y: auto;
}

.aisales-entity-empty {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	padding: var(--aisales-space-10) var(--aisales-space-6);
	flex: 1;
	background: radial-gradient(ellipse at center, var(--aisales-bg-subtle) 0%, transparent 70%);
}

.aisales-entity-empty .dashicons {
	font-size: 56px;
	width: 56px;
	height: 56px;
	margin-bottom: var(--aisales-space-5);
	color: var(--aisales-border);
	opacity: 0.6;
}

.aisales-entity-empty p {
	font-size: var(--aisales-font-md);
	color: var(--aisales-text-muted);
	margin: 0;
}

/* ==========================================================================
   Category Info Panel
   ========================================================================== */

.aisales-category-info {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow-y: auto;
}

/* Category Header */
.aisales-category-info__header {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-4);
	padding: var(--aisales-space-5);
	background: linear-gradient(180deg, var(--aisales-bg-subtle) 0%, var(--aisales-bg-white) 100%);
	border-bottom: 1px solid var(--aisales-border-light);
}

.aisales-category-info__icon {
	flex-shrink: 0;
	width: 56px;
	height: 56px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: linear-gradient(135deg, var(--aisales-success-light) 0%, #c8f0d4 100%);
	border-radius: var(--aisales-radius-lg);
	box-shadow: var(--aisales-shadow-sm);
}

.aisales-category-info__icon .dashicons {
	font-size: 28px;
	width: 28px;
	height: 28px;
	color: var(--aisales-success);
}

.aisales-category-info__title {
	display: flex;
	flex-direction: column;
	gap: var(--aisales-space-1);
	min-width: 0;
}

.aisales-category-info__title span:first-child {
	font-size: var(--aisales-font-lg);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
	line-height: var(--aisales-line-height-tight);
	white-space: nowrap;
	overflow: hidden;
	text-overflow: ellipsis;
}

.aisales-category-info__parent {
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-muted);
}

.aisales-category-info__parent:empty {
	display: none;
}

/* Category Stats */
.aisales-category-info__stats {
	display: flex;
	justify-content: space-around;
	padding: var(--aisales-space-4) var(--aisales-space-5);
	background: var(--aisales-bg-subtle);
	border-bottom: 1px solid var(--aisales-border-light);
}

.aisales-category-stat {
	text-align: center;
}

.aisales-category-stat__value {
	display: block;
	font-size: var(--aisales-font-xl);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
}

.aisales-category-stat__label {
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
}

/* Category Fields */
.aisales-category-info__field {
	margin-bottom: 0;
	padding: var(--aisales-space-3) var(--aisales-space-4);
	border-bottom: 1px solid var(--aisales-border-lighter);
	transition: background var(--aisales-transition-fast);
}

.aisales-category-info__field:hover {
	background: var(--aisales-bg-subtle);
}

.aisales-category-info__field:last-of-type {
	border-bottom: none;
}

.aisales-category-info__label {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	font-size: 11px;
	font-weight: var(--aisales-font-weight-semibold);
	color: var(--aisales-text-muted);
	text-transform: uppercase;
	letter-spacing: 0.8px;
	margin-bottom: var(--aisales-space-2);
}

.aisales-category-info__label .dashicons {
	font-size: 14px;
	width: 14px;
	height: 14px;
	color: var(--aisales-success);
	opacity: 0.7;
}

.aisales-category-info__value {
	font-size: var(--aisales-font-sm);
	color: var(--aisales-text-primary);
	line-height: var(--aisales-line-height-relaxed);
}

.aisales-category-info__value--truncated {
	max-height: 60px;
	overflow: hidden;
	position: relative;
}

.aisales-category-info__value--truncated::after {
	content: '';
	position: absolute;
	bottom: 0;
	left: 0;
	right: 0;
	height: 20px;
	background: linear-gradient(transparent, var(--aisales-bg-white));
}

.aisales-category-info__field--expanded .aisales-category-info__value--truncated {
	max-height: none;
}

.aisales-category-info__field--expanded .aisales-category-info__value--truncated::after {
	display: none;
}

/* Subcategories display */
.aisales-category-info__subcats {
	display: flex;
	flex-wrap: wrap;
	gap: var(--aisales-space-1);
}

.aisales-subcat-tag {
	display: inline-flex;
	align-items: center;
	gap: var(--aisales-space-1);
	padding: var(--aisales-space-1) var(--aisales-space-3);
	background: var(--aisales-bg-muted);
	border: 1px solid var(--aisales-border);
	border-radius: var(--aisales-radius-full);
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-secondary);
	transition: all var(--aisales-transition-fast);
}

.aisales-subcat-tag:hover {
	border-color: var(--aisales-success);
	color: var(--aisales-success);
}

.aisales-subcat-tag .dashicons {
	font-size: 12px;
	width: 12px;
	height: 12px;
}

/* Category Actions */
.aisales-category-info__actions {
	display: flex;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-4);
	background: var(--aisales-bg-subtle);
	border-top: 1px solid var(--aisales-border-light);
	margin-top: auto;
}

.aisales-category-info__actions .aisales-btn {
	flex: 1;
	justify-content: center;
}

/* Category Pending Changes */
.aisales-category-info__pending {
	margin-top: var(--aisales-space-3);
}

.aisales-category-info__field--has-pending {
	animation: fieldHighlight 0.5s ease;
}

/* ==========================================================================
   Agent Mode Styles
   ========================================================================== */

/* Agent Tab - Special Styling */
.aisales-entity-tab[data-type="agent"] {
	position: relative;
}

.aisales-entity-tab[data-type="agent"].aisales-entity-tab--active {
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
	color: white;
}

.aisales-entity-tab[data-type="agent"].aisales-entity-tab--active .dashicons {
	color: white;
}

/* Agent Welcome Card */
.aisales-welcome-card--agent {
	border-color: #e0e7ff;
}

.aisales-welcome-card--agent:hover {
	border-color: #6366f1;
	background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
}

.aisales-welcome-card__icon--agent {
	background: linear-gradient(135deg, #e0e7ff 0%, #c7d2fe 100%);
}

.aisales-welcome-card__icon--agent .dashicons {
	color: #6366f1;
}

/* Agent Quick Actions */
.aisales-quick-actions--agent {
	background: linear-gradient(180deg, #f5f3ff 0%, var(--aisales-bg-white) 100%);
	border-top-color: #e0e7ff;
}

.aisales-quick-actions--agent .aisales-quick-actions__label {
	color: #6366f1;
}

.aisales-btn--agent:not(:disabled):hover {
	background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
	border-color: #6366f1;
	color: #6366f1;
}

/* Agent Info Panel */
.aisales-agent-info {
	display: flex;
	flex-direction: column;
	height: 100%;
	overflow-y: auto;
}

.aisales-agent-info__header {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-4);
	padding: var(--aisales-space-5);
	background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
	border-bottom: 1px solid #e0e7ff;
}

.aisales-agent-info__icon {
	flex-shrink: 0;
	width: 56px;
	height: 56px;
	display: flex;
	align-items: center;
	justify-content: center;
	background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);
	border-radius: var(--aisales-radius-lg);
	box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
}

.aisales-agent-info__icon .dashicons {
	font-size: 28px;
	width: 28px;
	height: 28px;
	color: white;
}

.aisales-agent-info__title {
	display: flex;
	flex-direction: column;
	gap: var(--aisales-space-1);
	min-width: 0;
}

.aisales-agent-info__title span:first-child {
	font-size: var(--aisales-font-lg);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
	line-height: var(--aisales-line-height-tight);
}

.aisales-agent-info__subtitle {
	font-size: var(--aisales-font-xs);
	color: #6366f1;
	font-weight: var(--aisales-font-weight-medium);
}

/* Agent Section */
.aisales-agent-info__section {
	padding: var(--aisales-space-4);
	border-bottom: 1px solid var(--aisales-border-light);
}

.aisales-agent-info__section-title {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	font-size: 11px;
	font-weight: var(--aisales-font-weight-semibold);
	color: #6366f1;
	text-transform: uppercase;
	letter-spacing: 0.8px;
	margin-bottom: var(--aisales-space-3);
}

.aisales-agent-info__section-title .dashicons {
	font-size: 14px;
	width: 14px;
	height: 14px;
}

/* Agent Capabilities */
.aisales-agent-info__capabilities {
	margin: 0;
	padding: 0;
	display: flex;
	flex-direction: column;
	gap: var(--aisales-space-2);
}

.aisales-capability-btn {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-2) var(--aisales-space-3);
	background: var(--aisales-bg-subtle);
	border: 1px solid transparent;
	border-radius: var(--aisales-radius-md);
	font-size: var(--aisales-font-sm);
	color: var(--aisales-text-secondary);
	text-align: left;
	cursor: pointer;
	transition: all var(--aisales-transition-fast);
	width: 100%;
}

.aisales-capability-btn:hover {
	background: #f5f3ff;
	color: #6366f1;
	border-color: #c7d2fe;
}

.aisales-capability-btn .dashicons {
	font-size: 16px;
	width: 16px;
	height: 16px;
	color: #6366f1;
	opacity: 0.7;
}

.aisales-capability-btn:hover .dashicons {
	opacity: 1;
}

/* Agent Tips */
.aisales-agent-info__tips {
	padding: var(--aisales-space-4);
	margin-top: auto;
}

.aisales-agent-info__tip {
	display: flex;
	align-items: flex-start;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-3);
	background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
	border: 1px solid #f59e0b;
	border-radius: var(--aisales-radius-md);
	font-size: var(--aisales-font-xs);
	color: #92400e;
}

.aisales-agent-info__tip .dashicons {
	font-size: 14px;
	width: 14px;
	height: 14px;
	color: #f59e0b;
	flex-shrink: 0;
	margin-top: 1px;
}

/* Agent Mode - Empty state styling */
.aisales-entity-empty .dashicons-superhero-alt {
	color: #6366f1;
	opacity: 0.8;
}

/* Marketing Image Preview (for generated images) */
.aisales-marketing-image {
	margin-top: var(--aisales-space-4);
	border-radius: var(--aisales-radius-lg);
	overflow: hidden;
	border: 1px solid var(--aisales-border);
	box-shadow: var(--aisales-shadow-sm);
}

.aisales-marketing-image img {
	width: 100%;
	height: auto;
	display: block;
}

.aisales-marketing-image__actions {
	display: flex;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-3);
	background: var(--aisales-bg-subtle);
	border-top: 1px solid var(--aisales-border-light);
}

/* Campaign Content Preview */
.aisales-campaign-content {
	margin-top: var(--aisales-space-4);
	border: 1px solid var(--aisales-border);
	border-radius: var(--aisales-radius-lg);
	overflow: hidden;
}

.aisales-campaign-content__header {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-3) var(--aisales-space-4);
	background: linear-gradient(135deg, #f5f3ff 0%, #ede9fe 100%);
	border-bottom: 1px solid #e0e7ff;
	font-weight: var(--aisales-font-weight-semibold);
	color: #6366f1;
	font-size: var(--aisales-font-sm);
}

.aisales-campaign-content__header .dashicons {
	font-size: 16px;
	width: 16px;
	height: 16px;
}

.aisales-campaign-content__body {
	padding: var(--aisales-space-4);
	background: var(--aisales-bg-white);
}

.aisales-campaign-content__platform {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-muted);
	text-transform: uppercase;
	letter-spacing: 0.5px;
	margin-bottom: var(--aisales-space-2);
}

.aisales-campaign-content__text {
	font-size: var(--aisales-font-sm);
	color: var(--aisales-text-primary);
	line-height: var(--aisales-line-height-relaxed);
	white-space: pre-wrap;
}

.aisales-campaign-content__actions {
	display: flex;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-3) var(--aisales-space-4);
	background: var(--aisales-bg-subtle);
	border-top: 1px solid var(--aisales-border-light);
}
