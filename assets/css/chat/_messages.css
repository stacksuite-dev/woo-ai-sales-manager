/* ==========================================================================
   Chat Messages Area
   Message bubbles, avatars, welcome state, and thinking animation
   ========================================================================== */

.aisales-chat-messages {
	flex: 1;
	overflow-y: auto;
	overflow-x: hidden;
	padding: var(--aisales-space-6);
	display: flex;
	flex-direction: column;
	gap: var(--aisales-space-5);
	min-height: 0; /* Critical for flex overflow to work */
	background:
		radial-gradient(ellipse at top left, rgba(34, 113, 177, 0.02) 0%, transparent 50%),
		radial-gradient(ellipse at bottom right, rgba(0, 163, 42, 0.02) 0%, transparent 50%),
		var(--aisales-bg-white);
}

/* Custom scrollbar for chat messages */
.aisales-chat-messages::-webkit-scrollbar {
	width: 6px;
}

.aisales-chat-messages::-webkit-scrollbar-track {
	background: transparent;
}

.aisales-chat-messages::-webkit-scrollbar-thumb {
	background: var(--aisales-border);
	border-radius: 3px;
}

.aisales-chat-messages::-webkit-scrollbar-thumb:hover {
	background: var(--aisales-text-muted);
}

/* ==========================================================================
   Welcome State
   ========================================================================== */

.aisales-chat-welcome {
	display: flex;
	flex-direction: column;
	align-items: center;
	justify-content: center;
	text-align: center;
	padding: var(--aisales-space-10);
	flex: 1;
}

.aisales-chat-welcome__icon {
	width: 80px;
	height: 80px;
	border-radius: 50%;
	background: linear-gradient(135deg, var(--aisales-primary-light) 0%, var(--aisales-success-light) 100%);
	display: flex;
	align-items: center;
	justify-content: center;
	margin-bottom: var(--aisales-space-6);
	box-shadow:
		0 8px 24px rgba(34, 113, 177, 0.15),
		inset 0 -2px 8px rgba(0, 0, 0, 0.05);
}

.aisales-chat-welcome__icon .dashicons {
	font-size: 36px;
	width: 36px;
	height: 36px;
	background: linear-gradient(135deg, var(--aisales-primary) 0%, var(--aisales-success) 100%);
	-webkit-background-clip: text;
	-webkit-text-fill-color: transparent;
	background-clip: text;
}

/* Fallback for older dashicons styling */
.aisales-chat-welcome .dashicons {
	font-size: 48px;
	width: 48px;
	height: 48px;
	color: var(--aisales-text-muted);
	opacity: 0.4;
}

.aisales-chat-welcome h3 {
	font-size: var(--aisales-font-xl);
	font-weight: var(--aisales-font-weight-bold);
	color: var(--aisales-text-primary);
	margin: 0 0 var(--aisales-space-3) 0;
}

.aisales-chat-welcome p {
	font-size: var(--aisales-font-md);
	color: var(--aisales-text-secondary);
	margin: 0;
	max-width: 420px;
	line-height: var(--aisales-line-height-relaxed);
}

/* ==========================================================================
   Message Styles
   ========================================================================== */

.aisales-message {
	display: flex;
	gap: var(--aisales-space-3);
	max-width: 80%;
	animation: messageSlideIn 0.3s ease-out;
}

@keyframes messageSlideIn {
	from {
		opacity: 0;
		transform: translateY(12px);
	}
	to {
		opacity: 1;
		transform: translateY(0);
	}
}

.aisales-message--user {
	align-self: flex-end;
	flex-direction: row-reverse;
}

.aisales-message--assistant,
.aisales-message--system {
	align-self: flex-start;
}

.aisales-message--error {
	align-self: center;
	max-width: 100%;
}

/* ----- Message Avatar ----- */
.aisales-message__avatar {
	flex-shrink: 0;
	width: 36px;
	height: 36px;
	border-radius: 50%;
	display: flex;
	align-items: center;
	justify-content: center;
	box-shadow: var(--aisales-shadow-sm);
}

.aisales-message--user .aisales-message__avatar {
	background: linear-gradient(135deg, var(--aisales-primary) 0%, var(--aisales-primary-hover) 100%);
	color: white;
}

.aisales-message--assistant .aisales-message__avatar {
	background: linear-gradient(135deg, var(--aisales-success-light) 0%, #d4edda 100%);
	color: var(--aisales-success);
	border: 1px solid rgba(0, 163, 42, 0.2);
}

.aisales-message--system .aisales-message__avatar {
	background: var(--aisales-info-light);
	color: var(--aisales-info);
}

.aisales-message--error .aisales-message__avatar {
	background: linear-gradient(135deg, #fef2f2 0%, #fee2e2 100%);
	color: var(--aisales-danger);
	border: 1px solid rgba(220, 38, 38, 0.2);
}

.aisales-message__avatar .dashicons {
	font-size: 18px;
	width: 18px;
	height: 18px;
}

/* ----- Message Content ----- */
.aisales-message__content {
	flex: 1;
	min-width: 0;
}

.aisales-message__text {
	padding: var(--aisales-space-4);
	border-radius: var(--aisales-radius-lg);
	font-size: var(--aisales-font-md);
	line-height: var(--aisales-line-height-relaxed);
	box-shadow: var(--aisales-shadow-xs);
}

.aisales-message--user .aisales-message__text {
	background: linear-gradient(135deg, var(--aisales-primary) 0%, var(--aisales-primary-hover) 100%);
	color: white;
	border-bottom-right-radius: var(--aisales-radius-sm);
}

.aisales-message--assistant .aisales-message__text {
	background: var(--aisales-bg-white);
	color: var(--aisales-text-primary);
	border: 1px solid var(--aisales-border-light);
	border-bottom-left-radius: var(--aisales-radius-sm);
}

.aisales-message--system .aisales-message__text {
	background: var(--aisales-info-light);
	color: var(--aisales-text-primary);
	border: 1px solid rgba(114, 174, 230, 0.3);
}

.aisales-message--error .aisales-message__text {
	background: linear-gradient(135deg, #fef2f2 0%, #fce8e8 100%);
	color: #991b1b;
	border: 1px solid rgba(220, 38, 38, 0.25);
	font-size: var(--aisales-font-sm);
	line-height: 1.5;
}

.aisales-message--error .aisales-message__text code {
	background: rgba(220, 38, 38, 0.1);
	color: #b91c1c;
	font-size: 0.85em;
	word-break: break-word;
}

.aisales-message__text code {
	background: rgba(0, 0, 0, 0.08);
	padding: 2px 6px;
	border-radius: var(--aisales-radius-sm);
	font-family: var(--aisales-font-mono);
	font-size: 0.9em;
}

.aisales-message--user .aisales-message__text code {
	background: rgba(255, 255, 255, 0.2);
}

.aisales-message__meta {
	display: flex;
	justify-content: space-between;
	align-items: center;
	margin-top: var(--aisales-space-2);
	padding: 0 var(--aisales-space-2);
	font-size: var(--aisales-font-xs);
	color: var(--aisales-text-muted);
}

.aisales-message__tokens {
	opacity: 0.8;
}

/* ==========================================================================
   Thinking Animation
   ========================================================================== */

.aisales-thinking {
	display: flex;
	align-items: center;
	gap: var(--aisales-space-2);
	padding: var(--aisales-space-4);
	background: var(--aisales-bg-white);
	border-radius: var(--aisales-radius-lg);
	border: 1px solid var(--aisales-border-light);
	box-shadow: var(--aisales-shadow-xs);
}

.aisales-thinking__dot {
	width: 8px;
	height: 8px;
	background: linear-gradient(135deg, var(--aisales-primary) 0%, var(--aisales-primary-hover) 100%);
	border-radius: 50%;
	animation: thinkingBounce 1.4s ease-in-out infinite;
}

.aisales-thinking__dot:nth-child(1) { animation-delay: 0s; }
.aisales-thinking__dot:nth-child(2) { animation-delay: 0.2s; }
.aisales-thinking__dot:nth-child(3) { animation-delay: 0.4s; }

.aisales-thinking__text {
	color: var(--aisales-text-secondary);
	font-size: var(--aisales-font-sm);
	margin-left: var(--aisales-space-2);
	font-weight: var(--aisales-font-weight-medium);
}

@keyframes thinkingBounce {
	0%, 80%, 100% {
		transform: scale(0.6);
		opacity: 0.4;
	}
	40% {
		transform: scale(1);
		opacity: 1;
	}
}
